\subsection{Local Features}

The local feature extraction pipelines utilize the same preprocessing steps as
the ones based on global features. The curvelet transform remains unchanged as
well. The the curvelet coefficients are sampled using the PMEAN and PMEAN2
strategy to produce features for local patches. From these feature vectors, a
codebook of size $1000$ is generated and the feature vectors from both the
database images and the query images are quantized and weighted using the
TF-ITF method. The metrics used for ranking are the generic cosine and $L_2$
distance measures as well as histogram intersection and the earth mover's
distance.

\paragraph{LUMA+PMEAN(2)}
%\subsubsection{LUMA+PMEAN(2)}

Analogous to the global LUMA+MEAN variant, this pipeline configuration directly
uses the LUMA image representations as input for the curvelet transform
(Figure~\ref{fig:pipeline_local_luma_pmean}). For both, the PMEAN
(Table~\ref{tab:results_local_luma_pmean}) and PMEAN2
(Table~\ref{tab:results_local_luma_pmean2}) sampling method, histogram
intersection and the cosine measures are far superior to the $L_2$ metric and
even the EMD metric, although the results cannot compete with the global
LUMA+MEAN version.

\begin{figure}[h]
    \centering
    \input{illustrations/pipelines/local_luma_pmean.tex}
    \caption[Local LUMA+PMEAN(2) Pipelines]{
        Local LUMA+PMEAN(2) Pipelines
    }
    \label{fig:pipeline_local_luma_pmean}
\end{figure}

\begin{table}[h]
    \centering
    \subfloat[Local LUMA+PMEAN Results]{%
        \input{illustrations/graphs/l_luma_pmean.tex}
        \label{tab:results_local_luma_pmean}
    }
    \quad
    \subfloat[Local LUMA+PMEAN2 Results]{%
        \input{illustrations/graphs/l_luma_pmean2.tex}
        \label{tab:results_local_luma_pmean2}
    }
    \caption[Local LUMA+PMEAN(2) Results]{
        Local LUMA+PMEAN(2) Results
    }
    \label{tab:results_local_luma_pmean_all}
\end{table}

\FloatBarrier
\paragraph{CANNY+PMEAN(2)}
%\subsubsection{CANNY+PMEAN(2)}

Using the Canny edge detector and PMEAN sampling
(Figure~\ref{fig:pipeline_local_luma_canny_pmean}), the rank correlation
coefficient for COS and HI exceed all previous results
(Table~\ref{tab:results_local_luma_canny_pmean}) with the highest value
achieved is $0.22$.  Treating the coefficients on different scales separately
using the PMEAN2 sampling method is inferior to PMEAN in this case.

\begin{figure}[h]
    \centering
    \input{illustrations/pipelines/local_luma_canny_pmean.tex}
    \caption[Local CANNY+PMEAN Pipelines]{
        Local CANNY+PMEAN Pipelines
    }
    \label{fig:pipeline_local_luma_canny_pmean}
\end{figure}

\begin{table}[h]
    \centering
    \subfloat[Local CANNY+PMEAN Results]{%
        \input{illustrations/graphs/l_luma_canny_pmean.tex}
        \label{tab:results_local_luma_canny_pmean}
    }
    \quad
    \subfloat[Local CANNY+PMEAN2 Results]{%
        \input{illustrations/graphs/l_luma_canny_pmean2.tex}
        \label{tab:results_local_luma_canny_pmean2}
    }
    \caption[Local CANNY+PMEAN(2) Results]{
        Local CANNY+PMEAN(2) Results
    }
    \label{tab:results_local_luma_canny_pmean_all}
\end{table}

\FloatBarrier
\paragraph{SOBEL+PMEAN(2)}
%\subsubsection{SOBEL+PMEAN(2)}

Preprocessing the database images with the Sobel operator results in slightly
lower correlation coefficients. The PMEAN2 sampling algorithm yields better
results for the $L_2$ and EMD metrics, but worse for COS, HI and HIB.

\begin{figure}[h]
    \centering
    \input{illustrations/pipelines/local_luma_sobel_pmean.tex}
    \caption[Local SOBEL+PMEAN Pipelines]{
        Local SOBEL+PMEAN Pipelines
    }
    \label{fig:pipeline_local_luma_sobel_pmean}
\end{figure}

\begin{table}[h]
    \centering
    \subfloat[Local SOBEL+PMEAN Results]{%
        \input{illustrations/graphs/l_luma_sobel_pmean.tex}
        \label{tab:results_local_luma_sobel_pmean}
    }
    \quad
    \subfloat[Local SOBEL+PMEAN2 Results]{%
        \input{illustrations/graphs/l_luma_sobel_pmean2.tex}
        \label{tab:results_local_luma_sobel_pmean2}
    }
    \caption[Local SOBEL+PMEAN(2) Results]{
        Local SOBEL+PMEAN(2) Results
    }
    \label{tab:results_local_luma_sobel_pmean_all}
\end{table}

\FloatBarrier
\paragraph{SEGMENT+PMEAN(2)}

The SEGMENT step leads to similar, although slightly lower, results than the
Sobel operator. Neither PMEAN nor PMEAN2 have a consistent advantage across the
different distance measures.

\begin{figure}[h]
    \centering
    \input{illustrations/pipelines/local_luma_segment_pmean.tex}
    \caption[Local SEGMENT+PMEAN Pipelines]{
        Local SEGMENT+PMEAN Pipelines
    }
    \label{fig:pipeline_local_luma_segment_pmean}
\end{figure}

\begin{table}[h]
    \centering
    \subfloat[Local SEGMENT+PMEAN Results]{
        \input{illustrations/graphs/l_luma_segment_pmean.tex}
        \label{tab:results_local_luma_segment_pmean}
    }
    \quad
    \subfloat[Local SEGMENT+PMEAN2 Results]{
        \input{illustrations/graphs/l_luma_segment_pmean2.tex}
        \label{tab:results_local_luma_segment_pmean2}
    }
    \caption[Local SEGMENT+PMEAN(2) Results]{
        Local SEGMENT+PMEAN(2) Results
    }
    \label{tab:results_local_luma_segment_pmean_all}
\end{table}

\FloatBarrier
